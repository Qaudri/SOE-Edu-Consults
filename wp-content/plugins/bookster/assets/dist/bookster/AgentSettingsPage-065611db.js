import{d as e,_ as a,c as t,R as s,x as l,B as r,b as o,f as n,r as c,g as m,W as i}from"./prefetch.helper-04349684.js";import{P as d,a as b}from"./UIComponents-7ff4460b.js";import{f as u}from"./BEConfigProvider-705eafe2.js";import{a as w,u as f}from"./page-agent.js";import{A as h,a as g}from"./AgentScheduleTab-5fda5591.js";import{S as y}from"./Settings.styled-aa4d422d.js";import{l as p}from"./lodash-f550b173.js";import{g as E}from"./agentSchedule.helper-648c495b.js";import{a as k,b as v,c as x,d as S}from"./WeeklyScheduleEditor-9e383627.js";import"./useCacheCustomers-102bfcf8.js";import"./createBookTimeInput.helper-ed47ae63.js";import"./appointment.helper-07645f99.js";import"./BackendRouteErrorElement-6f34d3c9.js";import"./CalendarNav.styled-cb1aebbc.js";function _(){const c=w(),m=f((e=>e.saveAgentSetting)),i=f((e=>e.profile.isLoading)),[b]=e.Form.useForm(),{toast:u}=a.useToast(),E=t.useNavigate(),{tabId:k="schedule"}=t.useParams();return s.createElement(e.Form,{form:b,layout:"vertical",initialValues:c??{},onFinish:e=>{e.weekly_schedule=e.weekly_schedule?l(e.weekly_schedule):e.weekly_schedule,e.dayoff_schedule=e.dayoff_schedule?r(e.dayoff_schedule):e.dayoff_schedule,async function(e){try{await m(c.agent_id,p.pick(e,["weekly_schedule","weekly_schedule_enabled","dayoff_schedule","dayoff_schedule_enabled"])),u.success("Settings have been Saved Successfully!")}catch(a){u.error(await t.getErrorMsg(a))}}(e)}},s.createElement(a.Tabs,{className:"bw-mx-auto bw-max-w-[1350px]",defaultValue:"schedule",value:k},s.createElement(a.LoadingOverlay,{loading:i}),s.createElement(d.Standalone,{className:"bw-pb-2"},o.__("Settings","bookster")),s.createElement("div",{className:"bw-overflow-x-auto"},s.createElement(a.TabsList,{"aria-label":"tabs settings",className:"bw-mb-5 bw-min-w-max"},s.createElement(a.LineTabsTrigger,{value:"schedule",onClick:()=>{E("/settings/schedule")}},o.__("Schedule","bookster")),s.createElement(a.LineTabsTrigger,{value:"daysoff",onClick:()=>{E("/settings/daysoff")}},o.__("Days Off","bookster")),n.booksterHooks.applyFilters(n.HOOK_NAMES.agentSettings.TabsTrigger,[],E))),s.createElement(a.TabsContent,{value:"schedule",forceMount:!0},s.createElement(h,{className:"bw-mb-5 bw-max-h-[calc(100vh-312px)] bw-overflow-y-auto bw-rounded-md bw-bg-white bw-p-5 bw-shadow-sm"}),s.createElement(y,null)),s.createElement(a.TabsContent,{value:"daysoff",forceMount:!0},s.createElement(g,{className:"bw-mb-5 bw-max-h-[calc(100vh-312px)] bw-overflow-y-auto bw-rounded-md bw-bg-white bw-p-5 bw-shadow-sm"}),s.createElement(y,null)),n.booksterHooks.applyFilters(n.HOOK_NAMES.agentSettings.TabsContent,[],c)))}function N({weeklySchedule:e,dayOffSchedule:a}){const[t,l]=c.useState(C);return s.createElement(k.Provider,{value:{mode:"dayoff",year:t,weeklySchedule:e,holidaySchedule:window.booksterPublicData.holidaysSettings,dayOffSchedule:a,onClickCell:function(){},onMouseEnterCell:function(){}}},s.createElement(v,{decrement:()=>{l(t-1)},increment:()=>{l(t+1)}}),s.createElement("div",{className:"bw-grid bw-grid-cols-[repeat(auto-fill,minmax(20rem,1fr))] bw-gap-6"},T.map((e=>s.createElement(x,{key:e,month:e,isSelect:[void 0,void 0],inSelect:[void 0,void 0]})))))}const T=p.range(12),C=(new Date).getFullYear();function j(){const e=w(),{dayoff:a,weekly:t}=E(e);return s.createElement(N,{weeklySchedule:t,dayOffSchedule:a})}function O(){const e=w(),{weekly:t}=E(e);return s.createElement("div",{className:"bw-rounded bw-border bw-border-b-0 bw-border-solid bw-bg-white"},i.map((e=>{var l;const r=(null==(l=t[e].periods)?void 0:l.filter((e=>e)))??[];return s.createElement("div",{key:e,className:"bw-flex bw-cursor-not-allowed bw-items-center bw-justify-between bw-border-0 bw-border-b bw-border-solid bw-px-4 bw-py-3"},s.createElement(a.Switch,{checkedChildren:"Work",unCheckedChildren:"Off",checked:t[e].working}),s.createElement(a.Label,{className:"bw-ml-2 bw-flex-grow"},F[e]),s.createElement("span",{className:"bw-text-xs bw-font-medium bw-uppercase bw-text-gray-500"},!t[e].working&&o.__("Day off","bookster"),t[e].working&&s.createElement(S,{periods:r})))})))}const F=m.dayjs().localeData().weekdays();function M(){const e=t.useNavigate(),{tabId:l="schedule"}=t.useParams();return s.createElement(a.Tabs,{className:"bw-mx-auto bw-max-w-[1350px]",value:l},s.createElement(d.Standalone,{className:"bw-pb-2"},o.__("Settings","bookster")),s.createElement(a.TabsList,{"aria-label":"tabs settings",className:"bw-mb-5 bw-min-w-max"},s.createElement(a.LineTabsTrigger,{value:"schedule",onClick:()=>{e("/settings/schedule")}},o.__("Schedule","bookster")),s.createElement(a.LineTabsTrigger,{value:"daysoff",onClick:()=>{e("/settings/daysoff")}},o.__("Days Off","bookster"))),s.createElement(a.TabsContent,{value:"schedule",className:"bw-mx-auto bw-max-w-screen-lg",forceMount:!1},s.createElement("h4",{className:"bw-text-lg bw-font-medium"},"Weekly Working Schedule"),s.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-gray-500"},"Note: This schedule is for reference only and cannot be modified. For more information, please contact the Manager."),s.createElement(O,null)),s.createElement(a.TabsContent,{value:"daysoff",className:"bw-mx-auto bw-max-w-screen-xl",forceMount:!1},s.createElement("h4",{className:"bw-text-lg bw-font-medium"},"Yearly Day-off Schedule"),s.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-gray-500"},"Note: This schedule is for reference only and cannot be modified. For more information, please contact the Manager."),s.createElement(j,null)))}function L(){return s.createElement(b,null,u.writeSchedule?s.createElement(_,null):s.createElement(M,null))}export{L as default};
