import{R as e,f as t,c as a,_ as r,a as n,b as l,L as s,h as o}from"./prefetch.helper-04349684.js";import{N as b}from"./CalendarNav.styled-cb1aebbc.js";import{a as m,P as i}from"./UIComponents-7ff4460b.js";import{A as c}from"./AppointmentFormDrawer-884f27d3.js";import{A as w}from"./ApptsFilterAgent-3decfdb7.js";import{A as p,a as u,b as d}from"./ApptsFilterService-c1f460fc.js";import{A as g,a as x,b as E,c as f,R as y,d as h}from"./ReloadButton-f13d4c5e.js";import{u as k,h as v}from"./store-bdc614dc.js";import"./BEConfigProvider-705eafe2.js";import"./useCacheCustomers-102bfcf8.js";import"./createBookTimeInput.helper-ed47ae63.js";import"./appointment.helper-07645f99.js";import"./apptDataTable-a0a4fccd.js";import"./ReloadButton-117ef334.js";function C(){return e.createElement(e.Fragment,null,e.createElement(g,null),e.createElement(p,null),e.createElement(x,null),e.createElement(w,null),e.createElement(u,null),t.booksterHooks.applyFilters(t.HOOK_NAMES.adminApptList.BeforeApptsFilterClear,[]))}function N({className:o,...b}){const m=k((e=>e.appointments.ui.hidden)),i=k((e=>e.appointments.ui.order)),c=k((e=>e.hideAppointmentColumn)),w=k((e=>e.showAppointmentColumn)),p=k((e=>e.moveAppointmentColumnUp)),u=k((e=>e.moveAppointmentColumnDown)),d=k((e=>e.persistAppointmentColsForManager)),[g]=a.useAutoAnimate();return e.createElement(r.Popover,null,e.createElement(r.PopoverTrigger,{asChild:!0,onClick:e=>e.stopPropagation()},e.createElement(r.Button,{variant:"trivial",className:r.clsx("bw-bg-white bw-px-2",o),...b},e.createElement(n.SlidersHorizontal,null),l.__("Columns","bookster"))),e.createElement(r.PopoverPortal,{forceMount:!0},e.createElement(r.PopoverContent,{className:"bw-min-w-[15rem] data-[state=closed]:bw-hidden",align:"end",side:"bottom"},e.createElement("div",{ref:g,className:"bw-flex bw-flex-col bw-gap-2.5"},i.map(((a,o)=>{const b=!m.includes(a),g=`bw-col-toggle_${a}`,x=function(e){let a;switch(e){case"agent":a=s.agent;break;case"service":a=s.service;break;case"customer":a=s.customer;break;case"status":a=l.__("Status","bookster");break;case"payment":a=l.__("Payment","bookster");break;case"total":a=l.__("Total","bookster");break;case"book_time":a=l.__("Date / Time","bookster");break;default:a=e}return t.booksterHooks.applyFilters(t.HOOK_NAMES.adminApptList.columnToggleLabel,a,e)}(a);return e.createElement("div",{key:a,className:"bw-flex bw-items-center bw-gap-3"},e.createElement(r.Checkbox,{id:g,checked:b,onCheckedChange:e=>{!0===e?w(a):c(a),d()}}),e.createElement(r.Label,{htmlFor:g,className:"bw-me-auto bw-cursor-pointer"},x),e.createElement("div",{className:"bw-flex bw-items-center bw-gap-1"},e.createElement(r.Button,{className:"bw-h-4 bw-border-none bw-p-0 disabled:bw-text-gray-300",onClick:()=>{p(a),d()},variant:"link",disabled:0===o},e.createElement(n.ChevronUp,{className:"bw-h-2.5 bw-w-2.5 bw-cursor-pointer",strokeWidth:"4"})),e.createElement(r.Button,{className:"bw-ms-2 bw-h-4 bw-border-none bw-p-0 disabled:bw-text-gray-300",onClick:()=>{u(a),d()},variant:"link",disabled:o===i.length-1},e.createElement(n.ChevronDown,{className:"bw-h-2.5 bw-w-2.5 bw-cursor-pointer",strokeWidth:"4"}))))}))))))}function _(){const[t,n]=a.useSearchParams(),s=t.get("payment"),{data:o,isLoading:b}=a.useQuery({queryKey:["appointments","counter"],queryFn:async()=>await v(),keepPreviousData:!0}),m=1===t.size&&"incomplete"===s;return e.createElement("div",{className:r.cx("-bw-my-4 bw-flex bw-min-w-[190px] bw-cursor-pointer bw-justify-between bw-gap-2 bw-rounded bw-border bw-border-solid bw-bg-white bw-px-2.5 bw-py-[5px] bw-text-gray-500 hover:bw-border-gray-900 hover:bw-text-gray-900",m&&"bw-border-gray-900 bw-text-gray-900"),onClick:()=>{m||n({payment:"incomplete"})}},e.createElement("span",{className:r.cx("bw-flex bw-items-center bw-text-sm bw-font-normal")},l.__("Payment Incomplete","bookster")),e.createElement("span",{className:r.cx("bw-flex  bw-items-center bw-font-normal ",b&&"bw-animate-pulse bw-text-lg bw-leading-none")},e.createElement("span",{className:"bw-rounded-[5px] bw-bg-gray-70 bw-px-2 bw-py-[1px] bw-text-sm bw-leading-4 bw-text-gray-900"}," ",b?"...":null==o?void 0:o.payment_status_incomplete)))}function A(){const[t,n]=a.useSearchParams(),l=t.get("status"),{data:s,isLoading:b}=a.useQuery({queryKey:["appointments","counter"],queryFn:async()=>await v(),keepPreviousData:!0}),m=1===t.size&&"pending"===l;return e.createElement("div",{className:r.cx("-bw-my-4 bw-flex bw-min-w-[180px] bw-cursor-pointer bw-justify-between bw-gap-2 bw-rounded bw-border bw-border-solid bw-bg-white bw-px-2.5 bw-py-[5px] bw-text-gray-500 hover:bw-border-gray-900 hover:bw-text-gray-900",m&&"bw-border-gray-900 bw-text-gray-900"),onClick:()=>{m||n({status:"pending"})}},e.createElement("span",{className:r.cx("bw-flex bw-items-center bw-text-sm bw-font-normal")},o("pending")),e.createElement("span",{className:r.cx("bw-flex  bw-items-center bw-font-normal",b&&"bw-animate-pulse")},e.createElement("span",{className:"bw-rounded-[5px] bw-bg-gray-70 bw-px-2 bw-py-[1px] bw-text-sm bw-leading-4 bw-text-gray-900"},b?"...":null==s?void 0:s.book_status_pending)))}function j(){return e.createElement(m,null,e.createElement(i.Wrapper,null,e.createElement(i.Title,{className:"bw-flex-initial"},l.__("Appointments","bookster"))),e.createElement(r.Collapsible,null,e.createElement("div",{className:"bw-mb-2.5 bw-flex bw-flex-wrap bw-items-center bw-gap-2"},e.createElement(r.CollapsibleTrigger,{asChild:!0},e.createElement(b,null,e.createElement(n.Filter,null)," ",l.__("Filters","bookster"))),e.createElement(A,null),e.createElement(_,null),e.createElement("div",{className:"bw-flex bw-flex-grow bw-items-center bw-whitespace-nowrap"},e.createElement(E,null)),e.createElement(f,{className:"bw-w-80 bw-flex-none"}),e.createElement(N,null),e.createElement(y,null)),e.createElement(r.CollapsibleContent,{forceMountWithAnimation:!0},e.createElement("div",{className:"bw-mb-2.5 bw-mt-1.5 bw-flex bw-flex-wrap bw-items-center bw-gap-x-4 bw-gap-y-3 bw-rounded bw-border bw-border-solid bw-border-gray-100 bw-bg-white bw-px-4 bw-py-3.5"},e.createElement("span",{className:"bw-text-sm"},l.__("Select","booster")),e.createElement(C,null),e.createElement(d,null)))),e.createElement(h,null),e.createElement(c,{parentPath:"/appointments"},e.createElement(a.Outlet,null)))}export{j as default};
