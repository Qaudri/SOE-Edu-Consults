import{r as e,c as t,R as a,_ as n,a as s,L as r,b as l}from"./prefetch.helper-04349684.js";function m({className:m,...b}){const[c,w]=e.useState(!1),o=t.useActiveAgents(),[i,g]=t.useSearchParams(),d=i.get("agent"),p=(d?d.split(","):[]).map((e=>parseInt(e,10))),u=e=>{if(p.includes(e)){const t=p.filter((t=>t!==e));t.length>0?g((e=>(e.set("agent",t.join(",")),e))):g((e=>(e.delete("agent"),e)))}else g((t=>(t.set("agent",[...p,e].join(",")),t)))},x=e.useMemo((()=>{if(0===p.length)return null;const e=o.find((e=>e.agent_id===p[0]));return e?a.createElement(a.Fragment,null,a.createElement(n.Separator,{orientation:"vertical",className:"bw-mx-1.5 bw-h-[14px] bw-bg-gray-500/15"}),a.createElement("div",{className:"bw-mr-[-5px] bw-flex bw-items-center bw-gap-1"},a.createElement("div",{className:"bw-flex bw-items-center bw-gap-2 bw-rounded-sm bw-bg-white bw-p-1 bw-pr-2 bw-shadow-sm"},a.createElement(n.Avatar,{className:"bw-h-[18px] bw-w-[18px]"},a.createElement(n.AvatarImage,{src:e.transient_avatar_url}),a.createElement(n.AvatarFallback,{className:"bw-text-xs"},a.createElement(s.User,{className:"bw-h-3 bw-w-3"}))),a.createElement("span",{className:"bw-text-xs bw-font-medium"},`${e.first_name} ${e.last_name}`),a.createElement(s.X,{className:"bw-h-2 bw-w-2 bw-text-gray-500/80 hover:bw-text-error",strokeWidth:"3",onClick:t=>{t.stopPropagation(),u(e.agent_id)}})),p.length>1&&a.createElement("span",{className:"bw-inline-flex bw-h-[26px] bw-w-[26px] bw-items-center bw-justify-center bw-rounded-sm bw-bg-gray-500 bw-text-xs bw-font-medium bw-text-white"},"+",p.length-1))):null}),[p,o,u]);return a.createElement(n.Combobox,{open:c,onOpenChange:w},a.createElement(n.ComboboxTrigger,{size:"medium",withStatus:!1,className:n.clsx("bw-w-auto bw-gap-1 bw-rounded bw-border-dashed bw-border-gray-500/30 bw-bg-gray-50 bw-pe-2 bw-ps-2 bw-text-sm",m),...b},a.createElement(s.UserPlus,{className:"bw-text-gray-500"}),a.createElement("span",{className:"bw-text-gray-500"},r.agent),x),a.createElement(n.ComboboxPortalContent,{className:"bw-w-72 bw-p-0 bw-shadow-md",side:"bottom",align:"start"},a.createElement(n.Command,{loop:!0},a.createElement(n.CommandInput,{placeholder:"Search"}),a.createElement(n.CommandList,null,a.createElement(n.CommandEmpty,null,l.sprintf(l.__("No %(agents)s found.","bookster"),r)),a.createElement(n.CommandGroup,null,o.map((e=>a.createElement(n.ComboboxItem,{key:e.agent_id,value:`${e.agent_id}`,isActive:p.includes(e.agent_id),keywords:[e.first_name,e.last_name,e.email,e.phone],onSelect:()=>u(e.agent_id)},a.createElement("div",{className:"bw-flex bw-items-center bw-gap-1.5"},a.createElement(n.Avatar,{className:"bw-h-6 bw-w-6"},a.createElement(n.AvatarImage,{src:e.transient_avatar_url}),a.createElement(n.AvatarFallback,{className:"bw-text-xs"},a.createElement(s.User,{className:"bw-h-3 bw-w-3"}))),a.createElement("span",null,`${e.first_name} ${e.last_name}`)),a.createElement(n.ComboboxItemIcon,null)))))))))}export{m as A};
