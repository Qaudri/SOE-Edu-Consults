import{R as e,_ as t,r as o}from"./prefetch.helper-04349684.js";import{_ as a}from"./createBookTimeInput.helper-ed47ae63.js";import{c as n}from"./BookingFormRoot-a7a3ac97.js";const s=o.memo((function(){const{layout:o}=a.useBookingParts(),n=a.useBookingLayout().formLayout;return e.createElement(t.Slot,{key:o.key,className:t.clsx("bw-max-h-full bw-rounded-[inherit] bw-bg-white bw-text-gray-800","mobile"===n&&"bw-h-[inherit] bw-w-[inherit]","desktop"===n&&"bw-h-[42rem] bw-max-h-screen")},o.node)}));function r({trigger:r,children:i}){const l=t.useBreakpoint(n.desktop)?"desktop":"mobile",c=a.useBookingStore(),{actIndex:m,stepIndex:u}=a.useBookingState((e=>e.process.current)),d=a.useBookingState((e=>e.booked.state)),b=a.useBookingLogic().process,w="desktop"===l,g="desktop"===l&&!(0===m&&0===u)&&"complete"!==b.computed.phase,p=o.useMemo((()=>({formLayout:l,showSidebar:w,showSummary:g})),[l,w,g]),[k,h]=o.useState(!1);return o.useEffect((()=>{function e(){"processing"!==c.getState().booked.state&&h(!0)}return r&&r.addEventListener("click",e),()=>{r&&r.removeEventListener("click",e)}}),[r]),e.createElement(t.Dialog,{modal:!0,open:k,onOpenChange:function(e){"processing"!==d&&(e||b.mutate.reset(),h(e))}},e.createElement(t.DialogTrigger,{asChild:!0},i),e.createElement(t.DialogPortal,null,e.createElement(t.ReactDialog.Overlay,{className:"bw-fixed bw-inset-0 bw-z-[100000] bw-bg-black/50 data-[state=open]:bw-animate-in data-[state=closed]:bw-animate-out data-[state=closed]:bw-fade-out-0 data-[state=open]:bw-fade-in-0"}),e.createElement(t.DialogContent,{onInteractOutside:void 0,onPointerDownOutside:void 0,className:t.clsx("bw-z-[100000] bw-h-auto bw-max-h-full bw-w-auto bw-max-w-full bw-p-0","mobile"===l&&"bw-h-screen bw-w-screen")},e.createElement(t.DialogTitle,{className:"bw-hidden"},"Booking Form"),e.createElement(a.BookingLayoutContext.Provider,{value:p},e.createElement(s,null)))))}export{r as B};
