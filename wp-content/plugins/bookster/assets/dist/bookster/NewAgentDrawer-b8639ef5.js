import{c as e,_ as a,d as t,R as r,b as s,L as l,x as n,B as o,f as i}from"./prefetch.helper-04349684.js";import{c,v as m}from"./CoverPicker-52693ec5.js";import{u}from"./BEConfigProvider-705eafe2.js";import{g as d,p as b}from"./agent.helper-a271074e.js";import{A as g,a as E}from"./AgentGeneralTab-a55c53ee.js";import{A as f,a as p}from"./AgentScheduleTab-5fda5591.js";import"./phoneInput.helper-806287af.js";import"./WeeklyScheduleEditor-9e383627.js";import"./lodash-f550b173.js";import"./CalendarNav.styled-cb1aebbc.js";function y(){const y=e.useActiveServices(),{toast:_}=a.useToast(),h=u(),[v]=t.Form.useForm(),k=e.useQueryClient(),T=e.useMutation({mutationKey:["agents","new"],mutationFn:c,onSuccess:e=>{k.setQueryData(["agent",e.agent_id],e),k.invalidateQueries({queryKey:["agents"]})}}),w=d(y);return r.createElement(r.Fragment,null,r.createElement(a.DrawerHeader,null,r.createElement(a.DrawerTitle,null,s.sprintf(s.__("New %(agent)s","bookster"),l)),r.createElement(a.DrawerCloseIcon,null)),r.createElement(a.DrawerBody,null,r.createElement(a.LoadingOverlay,{loading:T.isLoading}),r.createElement(t.Form,{form:v,initialValues:w,disabled:T.isLoading,layout:"vertical",scrollToFirstError:!0,onFinish:a=>{a.weekly_schedule=a.weekly_schedule?n(a.weekly_schedule):a.weekly_schedule,a.dayoff_schedule=a.dayoff_schedule?o(a.dayoff_schedule):a.dayoff_schedule,async function(a){try{const e=b(a);await m(e.email),await T.mutateAsync(e),_.success(s.sprintf(s.__("%(agent)s has been Saved Successfully!","bookster"),l)),h("..")}catch(t){_.error(await e.getErrorMsg(t))}}(a)}},r.createElement(a.Tabs,{defaultValue:"general"},r.createElement(a.TabsList,{"aria-label":"tabs settings",className:"-bw-mt-1"},r.createElement(a.CompactLineTabsTrigger,{value:"general"},s.__("General","bookster")),r.createElement(a.CompactLineTabsTrigger,{value:"available"},s.__("Available","bookster")),r.createElement(a.CompactLineTabsTrigger,{value:"schedule"},s.__("Schedule","bookster")),r.createElement(a.CompactLineTabsTrigger,{value:"daysoff"},s.__("Days Off","bookster")),i.booksterHooks.applyFilters(i.HOOK_NAMES.managerAgentForm.TabsTrigger,[])),r.createElement(a.TabsContent,{value:"general"},r.createElement(g,null)),r.createElement(a.TabsContent,{value:"available"},r.createElement(E,null)),r.createElement(a.TabsContent,{value:"schedule"},r.createElement(f,null)),r.createElement(a.TabsContent,{value:"daysoff"},r.createElement(p,null)),i.booksterHooks.applyFilters(i.HOOK_NAMES.managerAgentForm.TabsContent,[])),r.createElement("button",{type:"submit",className:"bw-hidden"}))),r.createElement(a.DrawerFooter,null,r.createElement(a.DrawerClose,{asChild:!0},r.createElement(a.Button,{key:"back",tabIndex:-1,variant:"soft",size:"large",className:"bw-min-w-[7rem]"},s.__("Cancel","bookster"))),r.createElement(a.Button,{key:"submit",disabled:T.isLoading,size:"large",className:"bw-min-w-[7rem]",onClick:()=>v.submit()},s.__("Save","bookster"))))}export{y as default};
