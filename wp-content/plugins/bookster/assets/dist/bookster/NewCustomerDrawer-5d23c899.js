import{_ as e,d as r,c as t,R as a,b as s,L as o}from"./prefetch.helper-04349684.js";import{e as n,v as i}from"./useCacheCustomers-102bfcf8.js";import{u as l}from"./BEConfigProvider-705eafe2.js";import{C as m,D as c}from"./page-manager.js";import"./createBookTimeInput.helper-ed47ae63.js";import"./appointment.helper-07645f99.js";import"./BackendRouteErrorElement-6f34d3c9.js";import"./CoverPicker-52693ec5.js";import"./store-bdc614dc.js";import"./phoneInput.helper-806287af.js";function u(){const{toast:u}=e.useToast(),p=l(),[d]=r.Form.useForm(),E=t.useQueryClient(),w=t.useMutation({mutationKey:["customers","new"],mutationFn:n,onSuccess:e=>{E.setQueryData(["customer",e.customer_id],e),E.invalidateQueries({queryKey:["customers"]})}}),b=c;return a.createElement(a.Fragment,null,a.createElement(e.DrawerHeader,null,a.createElement(e.DrawerTitle,null,s.sprintf(s.__("New %(customer)s ","bookster"),o)),a.createElement(e.DrawerCloseIcon,null)),a.createElement(e.DrawerBody,null,a.createElement(e.LoadingOverlay,{loading:w.isLoading}),a.createElement(r.Form,{form:d,initialValues:b,disabled:w.isLoading,layout:"vertical",scrollToFirstError:!0,onFinish:e=>{!async function(e){try{await i(e.email),await w.mutateAsync(e),u.success(s.sprintf(s.__("%(customer)s has been Saved Successfully!","bookster"),o)),p("..")}catch(r){u.error(await t.getErrorMsg(r))}}(e)}},a.createElement(m,null))),a.createElement(e.DrawerFooter,null,a.createElement(e.DrawerClose,{asChild:!0},a.createElement(e.Button,{key:"back",tabIndex:-1,variant:"soft",size:"large",className:"bw-min-w-[7rem]"},s.__("Cancel","bookster"))),a.createElement(e.Button,{key:"submit",disabled:w.isLoading,size:"large",className:"bw-min-w-[7rem]",onClick:()=>d.submit()},s.__("Save","bookster"))))}export{u as default};
