import{R as e,_ as t,r,c as a,b as l,a as n,L as o,d as s,l as m,m as c,n as i,x as b,p as u,i as d}from"./prefetch.helper-04349684.js";import{C as w,B as p}from"./BEConfigProvider-705eafe2.js";import E from"./EditAgentDrawer-1ff4d378.js";import g from"./NewAgentDrawer-b8639ef5.js";import h from"./EditServiceDrawer-81dfc13f.js";import k from"./NewServiceDrawer-6ff6b82d.js";import{B as _}from"./BackendRouteErrorElement-6f34d3c9.js";import{A as f,a as y}from"./AgentsList-21806846.js";import{P as v}from"./UIComponents-7ff4460b.js";import{T as N,P as C,a as S,b as x,D as B,B as P,c as F,C as j,d as T}from"./settings.constants-7edf7550.js";import{u as A}from"./store-bdc614dc.js";import{W as I}from"./WeeklyScheduleEditor-9e383627.js";import{E as D}from"./ErrorAlert-4c797dab.js";import{K as M,S as R,N as U}from"./ServiceFormDrawer-3b6bfb3d.js";import{S as z}from"./useServiceFormContext-43091331.js";import"./CoverPicker-52693ec5.js";import"./agent.helper-a271074e.js";import"./AgentGeneralTab-a55c53ee.js";import"./phoneInput.helper-806287af.js";import"./AgentScheduleTab-5fda5591.js";import"./ServiceGeneralTab-007b1fbe.js";import"./color.helper-9b8c6bb8.js";import"./apptDataTable-a0a4fccd.js";import"./lodash-f550b173.js";import"./CalendarNav.styled-cb1aebbc.js";import"./ServiceCard-1f94e7ea.js";import"./queue.helper-cc60359e.js";import"./react-dom-3e43fe1d.js";function q({children:t,header:r,footer:a}){return e.createElement(e.Fragment,null,e.createElement("div",{className:"bw-mb-8 bw-text-center"},r),e.createElement("div",{className:"bw-mb-4"},t),e.createElement("div",{className:"bw-text-center"},a))}const L=t.stylex.div("bw-mt-3 bw-flex bw-flex-row bw-justify-end bw-gap-2"),O=r.forwardRef((({className:r,children:a,sideOffset:l=6,...n},o)=>e.createElement(t.PopoverPortalContent,{className:t.clsx("bw-px-4 bw-text-sm",r),sideOffset:l,...n,ref:o},a,e.createElement(t.PopoverArrow,{fill:"white",stroke:"#d1d5db"}))));function V(){const r=a.useMutation({mutationKey:["skip-intro"],mutationFn:async()=>{await a.api.patch("settings/intro",{json:{skipped:!0}})},onSuccess:()=>{window.location.href=window.booksterMeta.wpPath.managerAppUrl}});return e.createElement(t.Popover,null,e.createElement(t.PopoverTrigger,{asChild:!0},e.createElement(t.Button,{variant:"link",disabled:r.isLoading},l.__("Skip Setup","bookster"),r.isLoading?e.createElement(n.Loader2,{className:"bw-animate-spin"}):e.createElement(n.ArrowRight,null))),e.createElement(O,null,e.createElement("div",{className:"bw-flex bw-items-center bw-gap-2"},e.createElement(n.AlertCircle,{className:"bw-text-warning"}),e.createElement("span",null,l.__("Are you sure?","bookster"))),e.createElement(L,null,e.createElement(t.PopoverClose,{asChild:!0},e.createElement(t.Button,{size:"small",variant:"trivial"},l.__("No","bookster"))),e.createElement(t.Button,{size:"small",onClick:()=>r.mutate()},l.__("Yes","bookster")))))}function G(){const r=a.useNavigate();return e.createElement(q,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.sprintf(l.__("Set up your %(agents)s","bookster"),o)),e.createElement("p",null,l.sprintf(l.__("Tell us about the %(agents)s working with you. Please add at least some %(agents)s.","bookster"),o))),footer:e.createElement(V,null)},e.createElement(t.Card,{className:"bw-mt-6 bw-border bw-border-gray-300 bw-bg-gray-50"},e.createElement(t.CardContent,{className:"bw-rounded-[inherit] bw-pt-1"},e.createElement(v.Wrapper,{className:"bw-mb-2 bw-mt-4 bw-px-1"},e.createElement(v.Title,{className:"bw-flex bw-items-center"},o.agents),e.createElement(t.Button,{variant:"outline",size:"medium",onClick:()=>{r("new")},className:"bw-border-gray-300 bw-bg-white bw-font-medium bw-text-gray-900"},e.createElement(n.Plus,{strokeWidth:"2",className:"bw-h-2.5 bw-w-2.5"}),l.sprintf(l.__("New %(agent)s","bookster"),o))),e.createElement(f,null),e.createElement(y,null,e.createElement(a.Outlet,null))),e.createElement(t.CardFooter,{className:"bw-justify-center bw-rounded-[inherit] bw-border-0 bw-border-t bw-border-solid bw-bg-white bw-py-3"},e.createElement(t.Button,{key:"continue",size:"large",onClick:function(){a.api.patch("settings/intro",{json:{completed:!0}}),r("/publish")}},l.__("Continue","bookster")))))}function W(){const{isLoading:r,generalSettings:n,paymentSettings:o}=A((e=>e.settings)),m=A((e=>e.settingsUpdateIntroGeneral)),c={general:n,payment:o},[i]=s.Form.useForm(),{toast:b}=t.useToast(),u=a.useNavigate();return e.createElement(q,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.__("Welcome to Bookster","bookster")),e.createElement("p",null,l.__("Tell us about your business, configure the currency, phone code.","bookster"))),footer:e.createElement(V,null)},e.createElement(s.Form,{form:i,onFinish:async function(e){try{await m(e),b.success("General Settings has been Saved Successfully!"),u("/schedule")}catch(t){b.error(await a.getErrorMsg(t))}},initialValues:c,layout:"vertical"},e.createElement(t.Card,{className:"bw-mx-auto bw-max-w-screen-lg bw-pt-6"},e.createElement(t.CardContent,null,e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","time_slot_step"],rules:[{required:!0}],label:l.__("Default Time Slot Step","bookster"),help:"Interval between time slots in booking form, time picker and calendar.",trigger:"onValueChange"},e.createElement(N,null))),e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","default_appointment_status"],rules:[{required:!0}],label:l.__("Default Appointment Status","bookster"),trigger:"onValueChange"},e.createElement(t.Select,null,e.createElement(t.SelectTrigger,null,e.createElement(t.SelectValue,null)),e.createElement(t.SelectContent,null,e.createElement(t.SelectGroup,null,e.createElement(t.SelectItem,{value:"pending"},l.__("Pending","bookster")),e.createElement(t.SelectItem,{value:"approved"},l.__("Approved","bookster"))))))),e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","phone_country_code"],rules:[{required:!0}],label:l.__("Default Phone Country","bookster")},e.createElement(C,null))),e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","items_per_page"],rules:[{required:!0}],label:l.__("Default Items Per Page","bookster"),help:"Apply to records pages.",trigger:"onValueChange"},e.createElement(S,null)))),e.createElement(t.SectionSeparator.Title,{className:"bw-my-6"},l.__("Formats","bookster")),e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","time_system"],rules:[{required:!0}],label:l.__("Time Format","bookster"),help:"How to display time in Bookster, also apply to time picker.",trigger:"onValueChange"},e.createElement(x,null))),e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","date_format"],rules:[{required:!0}],label:l.__("Date Format","bookster"),help:"How to display date in Bookster.",trigger:"onValueChange"},e.createElement(B,null)))),e.createElement(t.SectionSeparator.Title,{className:"bw-my-6"},l.__("Restrictions","bookster")),e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","book_restriction_earliest"],rules:[{required:!0}],label:l.__("Earliest Possible Booking Time","bookster"),help:"Time Slots before this time will not be available for booking"},e.createElement(t.Cascader,{options:P,placeholder:l.__("Please select","bookster")}))),e.createElement("div",null,e.createElement(s.Form.Item,{name:["general","book_restriction_latest"],rules:[{required:!0}],label:l.__("Latest Possible Booking Time","bookster"),help:"Time Slots after this time will not be available for booking"},e.createElement(t.Cascader,{options:F,placeholder:l.__("Please select","bookster")})))),e.createElement(t.SectionSeparator.Title,{className:"bw-mb-6 bw-mt-2"},l.__("Currency Options","bookster")),e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement(s.Form.Item,{name:["payment","currency"],label:l.__("Currency","bookster"),rules:[{required:!0,message:l.__("Please select currency!","bookster")}]},e.createElement(j,{onChange:e=>{const t=a.CURRENCY_OPTIONS.find((t=>t[0]===e));i.setFieldValue(["payment","currency_symbol"],t?t[2]:"$")}})),e.createElement(s.Form.Item,{name:["payment","currency_symbol"],hidden:!0,noStyle:!0},e.createElement("input",null)),e.createElement(T,null))),e.createElement(t.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-py-3"},e.createElement(t.Button,{key:"continue",size:"large",type:"submit",disabled:r},l.__("Continue","bookster"))))))}function H(){const{toast:r}=t.useToast();function a(e,t=l.__("Shortcode has been copied!","bookster")){navigator.clipboard.writeText(e),r.info(t)}return e.createElement(q,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.sprintf(l.__("Publish Bookster for your %(customer)s","bookster"),o)),e.createElement("p",null,"There are several action you could take to Publish the Booking features.")),footer:null},e.createElement(t.Card,{className:"bw-m-0 bw-mx-auto bw-max-w-screen-lg bw-pt-5"},e.createElement(t.CardContent,null,e.createElement(m,null,e.createElement(c,{className:"bw-text-success/80"},e.createElement(n.CheckCircle,{className:"bw-h-16 bw-w-16"})),e.createElement(i,null,"Here are some actions you could take to Publish Bookster.")),e.createElement("div",{className:"bw-m-3 bw-flex bw-flex-col"},e.createElement("div",{className:"bw-mb-3 bw-flex bw-items-center bw-border-0 bw-border-t bw-border-solid bw-pt-3"},e.createElement("span",{className:"bw-text-success"},e.createElement(n.ListCheck,{className:"bw-mx-5 bw-block bw-h-6 bw-w-6"})),e.createElement("div",{className:"bw-flex-grow bw-space-y-2"},e.createElement("h4",null,l.__("Add a Booking Form Page","bookster")),e.createElement("p",{className:"bw-flex bw-gap-2"},l.__("Add Class to Button","bookster"),": ",e.createElement(t.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"base",onClick:()=>a("bookster-booking-button",l.__("Class has been copied!","bookster"))},"bookster-booking-button")),e.createElement("p",{className:"bw-flex bw-gap-2"},e.createElement("span",{className:"bw-text-gray-800"},l.__("Using Bookster Shortcodes","bookster"),": "),e.createElement(t.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"base",onClick:()=>a("[bookster_booking_form]")},"[bookster_booking_form]"),e.createElement(t.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"base",onClick:()=>a("[bookster_booking_button]")},"[bookster_booking_button]")),e.createElement("p",{className:"bw-flex bw-gap-2"},l.__("Using Bookster Blocks","bookster"),": ",e.createElement(t.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"base",onClick:()=>a("Bookster Booking Form",l.__("Block name has been copied!","bookster"))},"Bookster Booking Form"),e.createElement(t.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"base",onClick:()=>a("Bookster Booking Button",l.__("Block name has been copied!","bookster"))},"Bookster Booking Button"))),e.createElement("a",{href:`${window.booksterMeta.wpPath.adminUrl}/post-new.php?post_type=page&bookster_preset_page=booking-form&nonce=${window.booksterMeta.restPath.nonce}`,target:"_blank",rel:"noreferrer"},e.createElement(t.Button,{variant:"link"},"Add Now ",e.createElement(n.ArrowRight,null)))),e.createElement("div",{className:"bw-mb-3 bw-flex bw-items-center bw-border-0 bw-border-t bw-border-solid bw-pt-3"},e.createElement("span",{className:"bw-text-info"},e.createElement(n.SquareUser,{className:"bw-mx-5 bw-block bw-h-6 bw-w-6"})),e.createElement("div",{className:"bw-flex-grow"},e.createElement("h4",null,l.sprintf(l.__("Edit %(customer)s Dashboard Page","bookster"),o)),e.createElement("p",{className:"bw-flex"},e.createElement("span",{className:"bw-text-gray-800"},"Using this Shortcode: "),e.createElement(t.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"base",onClick:()=>a("[bookster_customer_dashboard]")},"[bookster_customer_dashboard]"))),e.createElement("a",{href:`${window.booksterMeta.wpPath.adminUrl}post.php?post=${window.booksterManagerData.permissionsSettings.customer_dashboard_page_id}&action=edit`,target:"_blank",rel:"noreferrer"},e.createElement(t.Button,{variant:"link"},"Edit Now ",e.createElement(n.ArrowRight,null)))),e.createElement("div",{className:"bw-flex bw-items-center bw-border-0 bw-border-t bw-border-solid bw-pt-4"},e.createElement("span",{className:"bw-text-warning"},e.createElement(n.Plug,{className:"bw-mx-5 bw-block bw-h-6 bw-w-6"})),e.createElement("div",{className:"bw-flex-grow"},e.createElement("h4",null,"Customize your Site, Home Page, Menu, etc."),e.createElement("span",{className:"bw-text-gray-800"},"Adding the Bookster Page and Shortcode to your Site.")),e.createElement("a",{href:`${window.booksterMeta.wpPath.adminUrl}/themes.php`,target:"_blank",rel:"noreferrer"},e.createElement(t.Button,{variant:"link"},"Edit Now ",e.createElement(n.ArrowRight,null)))))),e.createElement(t.CardFooter,{className:"bw-justify-center bw-gap-3 bw-border-0 bw-border-t bw-border-solid bw-py-3"},e.createElement("a",{href:window.booksterMeta.wpPath.managerAppUrl,target:"_blank",rel:"noreferrer"},e.createElement(t.Button,{size:"large"},"To Bookster")),e.createElement("a",{href:window.booksterMeta.wpPath.adminUrl,target:"_blank",rel:"noreferrer"},e.createElement(t.Button,{variant:"trivial",size:"large"},"Back to WordPress")))))}function $(){const[l,n]=r.useState(null),{isLoading:o,scheduleSettings:m}=A((e=>e.settings)),c=A((e=>e.settingsUpdateSchedule)),[i]=s.Form.useForm(),{toast:u}=t.useToast(),d=a.useNavigate();return e.createElement(q,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,"The Working Schedule for your Business"),e.createElement("p",null,"Please add at least a work day and a work period.")),footer:e.createElement(V,null)},e.createElement(s.Form,{form:i,onFinish:async function(e){if(e.schedule.weekly=b(e.schedule.weekly),!Object.values(e.schedule.weekly).some((e=>0!==e.periods.length)))return void n("Please add at least a work day and a work period!");const t={...m,...e};try{await c(t),u.success("Schedule Settings has been Saved Successfully!"),d("/services/list")}catch(r){u.error(await a.getErrorMsg(r))}},initialValues:{schedule:m},layout:"vertical"},e.createElement(t.Card,{className:"bw-mx-auto bw-max-w-screen-lg bw-pt-6"},e.createElement(t.CardContent,null,l&&e.createElement(D,null,l),e.createElement(I,{formNamePrefix:["schedule","weekly"],defaultActivePanelKeys:[]})),e.createElement(t.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-py-3"},e.createElement(t.Button,{key:"continue",size:"large",type:"submit",disabled:o},"Continue")))))}function K(){const r=a.useNavigate(),[n]=s.Form.useForm();return e.createElement(q,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.sprintf(l.__("Set up your %(services)s","bookster"),o)),e.createElement("p",null,l.sprintf(l.__("Tell us about the %(services)s that your business provides. Please add at least some.","bookster"),o))),footer:e.createElement(V,null)},e.createElement(t.Card,{className:"bw-mt-6 bw-border bw-border-gray-300 bw-bg-gray-50"},e.createElement(t.CardContent,{className:"bw-rounded-[inherit] bw-p-0 bw-pt-1"},e.createElement(M,null),e.createElement(z.Provider,{value:{form:n}},e.createElement(R,null,e.createElement(a.Outlet,null)),e.createElement(U,null))),e.createElement(t.CardFooter,{className:"bw-justify-center bw-rounded-[inherit] bw-border-0 bw-border-t bw-border-solid bw-bg-white bw-py-3"},e.createElement(t.Button,{key:"continue",size:"large",onClick:function(){r("/agents")}},"Continue"))))}const Y=[{key:"general",title:l.__("General Settings","bookster")},{key:"schedule",title:l.__("Schedule Settings","bookster")},{key:"services",title:o.services},{key:"agents",title:o.agents},{key:"publish",title:l.__("Publish","bookster")}];function J(){const r=t.useBreakpoint(t.BREAKPOINTS.md),l=a.useMatch("/:stepId/*"),n=function(e){const t=Y.findIndex((t=>t.key===e));return-1===t?0:t}(null==l?void 0:l.params.stepId);return e.createElement(e.Fragment,null,r?e.createElement(s.Steps,{items:Q,current:n}):e.createElement(e.Fragment,null,Y[n].title))}const Q=Y.map((e=>({key:e.key,title:e.title})));function X(){return e.createElement("div",{className:"bw-flex bw-h-svh bw-min-h-svh bw-w-screen bw-flex-1 bw-flex-col bw-bg-gray-50"},e.createElement("header",{className:"bw-z-10 bw-flex bw-h-16 bw-w-full bw-flex-none bw-items-center bw-justify-center bw-border-0 bw-border-b bw-border-solid bw-bg-white bw-px-6 bw-text-lg"},e.createElement(J,null)),e.createElement("main",{className:"btr-scrollbar-md bw-grow bw-overflow-auto bw-p-8 bw-pb-4"},e.createElement(a.Outlet,null),e.createElement(t.Toaster,null)))}u(),d.createRoot(document.getElementById("bookster-intro")).render(e.createElement(e.StrictMode,null,e.createElement(p,null,e.createElement(a.RouterProvider,{router:a.createHashRouter([{path:"*",element:e.createElement(X,null),errorElement:e.createElement(_,null),children:[{index:!0,element:e.createElement(W,null)},{path:"schedule",element:e.createElement($,null)},{path:"services/list",element:e.createElement(K,null),children:[{index:!0,element:e.createElement(w,null)},{path:"new",element:e.createElement(k,null)},{path:":serviceId",element:e.createElement(h,null)}]},{path:"agents",element:e.createElement(G,null),children:[{index:!0,element:e.createElement(w,null)},{path:"new",element:e.createElement(g,null)},{path:":agentId",element:e.createElement(E,null)}]},{path:"publish",element:e.createElement(H,null)}]}])}))));
