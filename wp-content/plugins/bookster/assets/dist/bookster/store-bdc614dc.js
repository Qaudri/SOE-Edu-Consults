import{c as e,x as t,g as s,j as a}from"./prefetch.helper-04349684.js";import{c as n,g as i,i as o,h as r,e as g}from"./BEConfigProvider-705eafe2.js";async function d(t){return await e.api.patch("appointments/query",{json:t}).json()}async function c(t){return await e.api.patch("appointments/count",{json:t}).json()}async function p(){return await e.api.patch("appointments/counter").json()}async function y(t){return await e.api.get(`appointments/${t}`).json()}async function l(t){return await e.api.get(`appointments/${t}/details`).json()}async function m(t){return await e.api.post("appointments",{json:t}).json()}async function u(t,s){return await e.api.patch(`appointments/${t}/bookings`,{json:s}).json()}async function h(t,s){return await e.api.patch(`appointments/${t}`,{json:s}).json()}async function w(t){return await e.api.delete(`appointments/${t}`).json()}async function v(e,t){return h(e,{book_status:t})}async function S(t){return await e.api.patch(`appointments/${t}/resend-email-to-customer`).json()}async function f(t){return await e.api.patch(`appointments/${t}/resend-email-to-agent`).json()}async function j(t){return await e.api.delete("appointments/bulk-action",{json:{ids:t}}).json()}async function b(t,s){return await e.api.patch("appointments/bulk-action",{json:{ids:t,values:s}}).json()}const D=(e,t)=>({services:{form:{presetValues:void 0,nestedCategory:["close"]},categoryForm:{isOpen:!1},serviceForm:{isOpen:!1}},initServiceForm:t=>{e((e=>{e.services.form.presetValues=t,e.services.form.nestedCategory=["close"]}))},resetServiceForm:()=>{e((e=>{e.services.form.presetValues=void 0,e.services.form.nestedCategory=["close"]}))},newServiceNestedCategory:()=>{e((e=>{e.services.form.nestedCategory=["new"]}))},editServiceNestedCategory:t=>{e((e=>{e.services.form.nestedCategory=["edit",t]}))},closeServiceNestedCategory:()=>{e((e=>{e.services.form.nestedCategory=["close"]}))}}),P=(s,a)=>({settings:{generalSettings:window.booksterManagerData.generalSettings,scheduleSettings:window.booksterManagerData.scheduleSettings,holidaysSettings:window.booksterManagerData.holidaysSettings,permissionsSettings:window.booksterManagerData.permissionsSettings,paymentSettings:window.booksterManagerData.paymentSettings,isLoading:!1},settingsUpdateIntroGeneral:async t=>{try{s((e=>{e.settings.isLoading=!0}));const n=a().settings,i={...n.generalSettings,...t.general},o={...n.paymentSettings,...t.payment};await Promise.all([e.api.patch("settings/general",{json:{general:i}}),e.api.patch("settings/payment",{json:{payment:o}})]),s((e=>{e.settings.generalSettings=i,e.settings.paymentSettings=o})),k({generalSettings:i,paymentSettings:o})}finally{s((e=>{e.settings.isLoading=!1}))}},settingsUpdateGeneral:async t=>{try{s((e=>{e.settings.isLoading=!0})),await e.api.patch("settings/general",{json:t}),s((e=>{e.settings.generalSettings={...e.settings.generalSettings,...t.general}})),k({generalSettings:t.general})}finally{s((e=>{e.settings.isLoading=!1}))}},settingsUpdateSchedule:async a=>{try{a.schedule.weekly=t(a.schedule.weekly),s((e=>{e.settings.isLoading=!0})),await e.api.patch("settings/schedule",{json:a}),s((e=>{e.settings.scheduleSettings={...e.settings.scheduleSettings,...a.schedule}})),k({scheduleSettings:a.schedule})}finally{s((e=>{e.settings.isLoading=!1}))}},settingsUpdateHoliday:async t=>{const n=a().settings.holidaysSettings,i=e.applyFormValuesIntoHolidaySettings(t,n);await e.api.patch("settings/holidays",{json:{holidays:i}}),s((e=>{e.settings.holidaysSettings=i})),k({holidaysSettings:i})},settingsUpdatePermissions:async t=>{try{s((e=>{e.settings.isLoading=!0})),await e.api.patch("settings/permissions",{json:t}),s((e=>{e.settings.permissionsSettings={...e.settings.permissionsSettings,...t.permissions}})),k({permissionsSettings:t.permissions})}finally{s((e=>{e.settings.isLoading=!1}))}},settingsUpdatePayment:async t=>{try{s((e=>{e.settings.isLoading=!0})),await e.api.patch("settings/payment",{json:t}),s((e=>{e.settings.paymentSettings={...e.settings.paymentSettings,...t.payment}})),function(e){const t={...e,paymentSettings:e.payment};delete t.payment,k(t)}(t)}finally{s((e=>{e.settings.isLoading=!1}))}},settingsUpdateCustomize:async t=>{try{s((e=>{e.settings.isLoading=!0})),await e.api.patch("settings/customize",{json:t}),k({customizeSettings:t.customize})}finally{s((e=>{e.settings.isLoading=!1}))}}});function k(e){Object.assign(window.booksterManagerData,e),Object.assign(window.booksterPublicData,e)}let L;function M(t,d){return L||(L=e.createStore()(e.immer(e.devtools(((...e)=>{const t=s.dayjs(),d=t.add(1,"day"),c=t.utc(!0).startOf("day").toDate(),p=d.utc(!0).startOf("day").toDate(),y=i().calendarViewManager,l=a(y),m=g(l),u=(h={intervalRange:i().dashboardIntervalRange,dayPreview:{title:t.format("MMMM D, YYYY"),activeStart:c,activeEnd:p}},(e,t)=>({dashboard:h,dashboardSetIntervalRange(t){e((e=>{e.dashboard.intervalRange=t})),n({dashboardIntervalRange:t})},dashboardDayPreviewRefresh(t){e((e=>{e.dashboard.dayPreview.title=t.view.title,e.dashboard.dayPreview.activeStart=t.view.activeStart,e.dashboard.dayPreview.activeEnd=t.view.activeEnd}))},dashboardDayPreviewNext(e){e.next(),t().dashboardDayPreviewRefresh(e)},dashboardDayPreviewPrev(e){e.prev(),t().dashboardDayPreviewRefresh(e)},dashboardDayPreviewToday(e){e.today(),t().dashboardDayPreviewRefresh(e)}}));var h;const w=o({hidden:i().columnsForManager.hidden,order:r()});return{...u(...e),...m(...e),...w(...e),...D(...e),...P(...e)}}))))),e.useStore(L,t,d)}export{l as a,f as b,m as c,w as d,u as e,h as f,y as g,p as h,c as i,b as j,j as k,v as l,d as q,S as r,M as u};
