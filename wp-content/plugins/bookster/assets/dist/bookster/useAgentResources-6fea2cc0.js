import{c as e,r as s}from"./prefetch.helper-04349684.js";import{q as t}from"./store-bdc614dc.js";import{k as r,S as n}from"./appointment.helper-07645f99.js";function a(s){return e.useQuery({queryKey:["appointments","events",s],queryFn:async()=>(await t(s)).data.map((e=>({id:e.appointment_id.toString(),title:e.service.name,start:e.busy_datetime_start,end:e.busy_datetime_end,resourceIds:e.agent_ids.map((e=>e.toString())),model:e})))})}function o(){const t=e.useActiveAgents(),a=s.useMemo((()=>t.map((e=>{const s=e.weekly_schedule_enabled&&e.weekly_schedule?r(e.weekly_schedule).businessHours:[];return{id:e.agent_id.toString(),title:e.first_name+" "+e.last_name,businessHours:!!(s&&s.length>0)&&s,model:e}}))),[t]),{slotMinAbs:o,slotMaxAbs:i}=s.useMemo((()=>{let e=n.slotMinAbs,s=n.slotMaxAbs;return a.forEach((t=>{t.businessHours&&t.businessHours.forEach((t=>{Array.isArray(t)&&t.forEach((t=>{t.startAbsMinute<e&&(e=t.startAbsMinute),t.endAbsMinute>s&&(s=t.endAbsMinute)}))}))})),{slotMinAbs:60*Math.floor(e/60),slotMaxAbs:60*Math.ceil(s/60)}}),[a]);return{resources:a,slotMinAbs:o,slotMaxAbs:i}}export{a,o as u};
